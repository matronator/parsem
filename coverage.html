<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="robots" content="noindex,noarchive">
	<meta name="generator" content="Nette Tester">

	<title>Code coverage</title>

	<style type="text/css">
	html {
		font: 14px/1.5 Verdana,"Geneva CE",lucida,sans-serif;
		border-top: 7.7em solid #f4ebdb;
	}

	body {
		max-width: 990px;
		margin: -7.7em auto 0;
		background: #fcfaf5;
		color: #333;
	}

	footer {
		margin-left: .5em;
	}

	h1 {
		font-family: "Trebuchet MS","Geneva CE",lucida,sans-serif;
		font-size: 1.9em;
		margin: .5em;
		color: #7a7772;
		text-shadow: 1px 1px 0 white;
	}

	h1 small {
		font-size: 60%;
	}

	div.code {
		background: white;
		border: 1px dotted silver;
		padding: .4em 0;
		display: none;
		color: #333;
		overflow: auto;
	}

	code,
	div.code {
		font: 13px/1.3 monospace;
	}

	div.code > div {
		float: left;
		min-width: 100%;
		position: relative;
	}

	aside {
		min-width: 100%;
		position: absolute;
	}

	aside div {
		white-space: pre;
		padding-left: .7em;
	}

	aside a {
		color: #c0c0c0;
		display: block;
	}

	aside a:hover {
		color: inherit;
		font-weight: bold;
		text-decoration: none;
	}

	code {
		display: block;
		white-space: nowrap;
		position: relative;
	}

	i {
		font-style: normal;
	}

	a {
		color: #006aeb;
		text-decoration: none;
	}

	a:active,
	a:hover {
		text-decoration: underline;
	}

	td {
		vertical-align: middle;
	}

	small {
		color: gray;
	}

	.number {
		text-align: right;
		width: 50px;
	}

	.bar {
		border: 1px solid #acacac;
		background: #e50400;
		width: 35px;
		height: 1em;
	}

	.bar-empty {
		border: 1px solid transparent;
		background: transparent;
		width: 35px;
		height: 1em;
	}

	.bar div {
		background: #1a7e1e;
		height: 1em;
	}

	.light td {
		opacity: .5;
	}

	.light td * {
		color: gray;
	}

	.not-loaded td * {
		color: red;
	}

	.t { background-color: #e0ffe0; }
	.u { background-color: #ffe0e0; }

	code .hc { color: #929292; }
	code .hd { color: #333; }
	code .hh { color: #06B; }
	code .hk { color: #e71818; }
	code .hs { color: #008000; }

	.tabs {
		margin-bottom: 1.5em;
	}

	.tabs a {
		padding: .5em 1.5em;
		display: inline-block;
		font-size: 17px;
	}

	.tabs a.active,
	.tabs a:focus,
	.tabs a:hover {
		background-color: #fcfaf5;
		text-decoration: none;
	}

	.directory {
		display: none;
		margin-left: 1.5rem;
	}

	.directory.opened {
		display: block;
	}

	.toggle-dir {
		color: brown;
	}

	.toggle-dir:before {
		content: '▼ ';
	}

	.toggle-dir.opened:before {
		content: '▲ ';
	}

	.sort .up, .sort .no-sort, .sort .down {
		display: inline-block;
		padding-left: 5px;
		color: #c9302c
	}

	.sort .no-sort {
		color: #ccc
	}

	.sort .up, .sort .down, .sort .no-sort,
	.sort.desc:hover .up, .sort.desc:hover .down,
	.sort.asc .no-sort, .sort.down .no-sort, .sort.asc:hover .up, .sort:hover .no-sort {
		display: none
	}

	.sort:hover .up, .sort.asc .up,
	.sort.desc:hover .no-sort,
	.sort.asc:hover .down, .sort.desc .down {
		display: inline-block
	}
	</style>
</head>

<body>


<h1>
	Code coverage 40&nbsp;%
	<small>sources have 844 lines of code in 6 files</small>
</h1>

<nav class="tabs">
	<a href="#list" class="tab-item active">List</a>
	<a href="#tree" class="tab-item">Tree</a>
</nav>

<div class="tabs-content">
	<div id="list" class="tab-content">
		<table>
			<tbody>
			<tr>
				<td class="number">
					<a href="#" class="sort desc" data-sort="coverage"><span class="up">↓</span><span class="down">↑</span><span class="no-sort">&nbsp;</span>%</a>
				</td>
				<td>
					<div class="bar-empty"></div>
				</td>
				<td>
					<a href="#" class="sort" data-sort="path">path<span class="up">↓</span><span class="down">↑</span><span class="no-sort">&nbsp;</span></a>
				</td>
			</tr>
			</tbody>
		</table>
		<div id="files-content"></div>
	</div>
	<div id="tree" class="tab-content" style="display: none"></div>
</div>

<footer>
	<p>Generated by <a href="https://tester.nette.org">Nette Tester</a> at 2025/05/24 23:59:04</p>
</footer>

<script>
	(function() {
		let _files = {"F0":{"name":"Filters.php","file":"\/Users\/matejbystricky\/Documents\/Work\/Matronator Brand\/projects\/gh.nosync\/parsem\/src\/Parsem\/Filters.php","lines":{"23":1,"28":-1,"33":1,"34":1,"39":-1,"40":-1,"45":-1,"50":-1,"55":1,"56":1,"57":1,"58":1,"63":-1,"64":-1,"65":-1,"70":1,"71":1,"72":1,"77":1,"78":1,"79":1,"84":-1,"85":-1,"86":-1,"91":-1,"96":-1,"101":-1,"102":-1,"105":-1,"110":-1,"111":-1,"113":-1,"118":1,"119":1,"122":1,"125":1,"68":1,"21":1,"75":1,"53":1,"31":1,"116":1},"coverage":55,"total":42,"class":null,"digits":4,"lineCount":125,"content":"<code style='margin-left: 4em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php<br><br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);<br><br>namespace&nbsp;<\/i><i class=\"hd\">Matronator\\Parsem<\/i><i class=\"hk\">;<br><br>class&nbsp;<\/i><i class=\"hd\">Filters<br><\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;const&nbsp;<\/i><i class=\"hd\">ENCODING&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hs\">'UTF-8'<\/i><i class=\"hk\">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;const&nbsp;<\/i><i class=\"hd\">GLOBAL_FILTERS&nbsp;<\/i><i class=\"hk\">=&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hs\">'upper'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'lower'<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hs\">'upperFirst'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'lowerFirst'<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hs\">'first'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'last'<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hs\">'camelCase'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'snakeCase'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'kebabCase'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'pascalCase'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'titleCase'<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hs\">'length'<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hs\">'reverse'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'random'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'shuffle'<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hs\">'truncate'<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hs\">'escape'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'unescape'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'hash'<\/i><i class=\"hk\">];<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">upper<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">mb_strtoupper<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;static::<\/i><i class=\"hd\">ENCODING<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">lower<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">mb_strtolower<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;static::<\/i><i class=\"hd\">ENCODING<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">upperFirst<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$fc&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">mb_strtoupper<\/i><i class=\"hk\">(<\/i><i class=\"hd\">mb_substr<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">0<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">1<\/i><i class=\"hk\">,&nbsp;static::<\/i><i class=\"hd\">ENCODING<\/i><i class=\"hk\">),&nbsp;static::<\/i><i class=\"hd\">ENCODING<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$fc&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">mb_substr<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">1<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">,&nbsp;static::<\/i><i class=\"hd\">ENCODING<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">lowerFirst<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$fc&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">mb_strtolower<\/i><i class=\"hk\">(<\/i><i class=\"hd\">mb_substr<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">0<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">1<\/i><i class=\"hk\">,&nbsp;static::<\/i><i class=\"hd\">ENCODING<\/i><i class=\"hk\">),&nbsp;static::<\/i><i class=\"hd\">ENCODING<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$fc&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">mb_substr<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">1<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">,&nbsp;static::<\/i><i class=\"hd\">ENCODING<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">first<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">mb_substr<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">0<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">1<\/i><i class=\"hk\">,&nbsp;static::<\/i><i class=\"hd\">ENCODING<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">last<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">mb_substr<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;-<\/i><i class=\"hd\">1<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">1<\/i><i class=\"hk\">,&nbsp;static::<\/i><i class=\"hd\">ENCODING<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">camelCase<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$string&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">str_replace<\/i><i class=\"hk\">([<\/i><i class=\"hs\">'-'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'_'<\/i><i class=\"hk\">],&nbsp;<\/i><i class=\"hs\">'&nbsp;'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$string&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">ucwords<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$string&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">str_replace<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'&nbsp;'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">''<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">snakeCase<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$string&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">preg_replace<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'\/([a-z])([A-Z])\/'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'$1_$2'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$string&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">strtolower<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">kebabCase<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$string&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">preg_replace<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'\/([a-z])([A-Z])\/'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'$1-$2'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$string&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">strtolower<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">pascalCase<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$string&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">camelCase<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$string&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">upperFirst<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">titleCase<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$string&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">str_replace<\/i><i class=\"hk\">([<\/i><i class=\"hs\">'-'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'_'<\/i><i class=\"hk\">],&nbsp;<\/i><i class=\"hs\">'&nbsp;'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$string&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">ucwords<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">length<\/i><i class=\"hk\">(array|<\/i><i class=\"hd\">string&nbsp;$value<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">int<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">is_string<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">)&nbsp;?&nbsp;<\/i><i class=\"hd\">mb_strlen<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">,&nbsp;static::<\/i><i class=\"hd\">ENCODING<\/i><i class=\"hk\">)&nbsp;:&nbsp;<\/i><i class=\"hd\">count<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">reverse<\/i><i class=\"hk\">(array|<\/i><i class=\"hd\">string&nbsp;$value<\/i><i class=\"hk\">):&nbsp;array|<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">is_string<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">)&nbsp;?&nbsp;<\/i><i class=\"hd\">strrev<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">)&nbsp;:&nbsp;<\/i><i class=\"hd\">array_reverse<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">random<\/i><i class=\"hk\">(array|<\/i><i class=\"hd\">string&nbsp;$value<\/i><i class=\"hk\">):&nbsp;array|<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">is_string<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">[<\/i><i class=\"hd\">rand<\/i><i class=\"hk\">(<\/i><i class=\"hd\">0<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">strlen<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">)&nbsp;-&nbsp;<\/i><i class=\"hd\">1<\/i><i class=\"hk\">)];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">[<\/i><i class=\"hd\">array_rand<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">)];<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">shuffle<\/i><i class=\"hk\">(array|<\/i><i class=\"hd\">string&nbsp;$value<\/i><i class=\"hk\">):&nbsp;array|<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$array&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">is_string<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">)&nbsp;?&nbsp;<\/i><i class=\"hd\">str_split<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">)&nbsp;:&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">shuffle<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$array<\/i><i class=\"hk\">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">truncate<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">int&nbsp;$length<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">string&nbsp;$ending&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hs\">'...'<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">mb_strlen<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;static::<\/i><i class=\"hd\">ENCODING<\/i><i class=\"hk\">)&nbsp;&lt;=&nbsp;<\/i><i class=\"hd\">$length<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">mb_substr<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">0<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$length<\/i><i class=\"hk\">,&nbsp;static::<\/i><i class=\"hd\">ENCODING<\/i><i class=\"hk\">)&nbsp;.&nbsp;<\/i><i class=\"hd\">$ending<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br><\/i>\n<\/i>\n<\/code>"},"F1":{"name":"Engine.php","file":"\/Users\/matejbystricky\/Documents\/Work\/Matronator Brand\/projects\/gh.nosync\/parsem\/src\/Parsem\/Engine.php","lines":[],"coverage":0,"total":0,"class":"not-loaded","digits":3,"lineCount":53,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php<br><br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);<br><br>namespace&nbsp;<\/i><i class=\"hd\">Matronator\\Parsem<\/i><i class=\"hk\">;<br><br>use&nbsp;<\/i><i class=\"hd\">Matronator\\Parsem\\Config\\Options<\/i><i class=\"hk\">;<br>use&nbsp;<\/i><i class=\"hd\">Matronator\\Parsem\\Config\\PatternsOption<\/i><i class=\"hk\">;<br><br>class&nbsp;<\/i><i class=\"hd\">Engine<br><\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;<\/i><i class=\"hd\">bool&nbsp;$strict&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;<\/i><i class=\"hd\">bool&nbsp;$trimBeforeBlocks&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">false<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;<\/i><i class=\"hd\">bool&nbsp;$trimAfterBlocks&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">false<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;<\/i><i class=\"hd\">PatternsOption&nbsp;$patterns&nbsp;<\/i><i class=\"hk\">=&nbsp;new&nbsp;<\/i><i class=\"hd\">PatternsOption<\/i><i class=\"hk\">();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">__construct<\/i><i class=\"hk\">(<\/i><i class=\"hd\">Options<\/i><i class=\"hk\">|array|<\/i><i class=\"hd\">null&nbsp;$options&nbsp;<\/i><i class=\"hk\">=&nbsp;new&nbsp;<\/i><i class=\"hd\">Options<\/i><i class=\"hk\">())<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">setOptions<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$options<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">setOptions<\/i><i class=\"hk\">(<\/i><i class=\"hd\">Options<\/i><i class=\"hk\">|array|<\/i><i class=\"hd\">null&nbsp;$options&nbsp;<\/i><i class=\"hk\">=&nbsp;new&nbsp;<\/i><i class=\"hd\">Options<\/i><i class=\"hk\">()):&nbsp;<\/i><i class=\"hd\">void<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!(<\/i><i class=\"hd\">$options&nbsp;<\/i><i class=\"hk\">instanceof&nbsp;<\/i><i class=\"hd\">Options<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">is_array<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$options<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$options&nbsp;<\/i><i class=\"hk\">=&nbsp;new&nbsp;<\/i><i class=\"hd\">Options<\/i><i class=\"hk\">(...<\/i><i class=\"hd\">$options<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">\\InvalidArgumentException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'Options&nbsp;must&nbsp;be&nbsp;an&nbsp;instance&nbsp;of&nbsp;Options&nbsp;class&nbsp;or&nbsp;an&nbsp;array.'<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">strict&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$options<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">strict&nbsp;<\/i><i class=\"hk\">??&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">strict<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">patterns&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$options<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">patterns&nbsp;<\/i><i class=\"hk\">??&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">patterns<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">trimBeforeBlocks&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$options<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">trimBeforeBlocks&nbsp;<\/i><i class=\"hk\">??&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">trimBeforeBlocks<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">trimAfterBlocks&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$options<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">trimAfterBlocks&nbsp;<\/i><i class=\"hk\">??&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">trimAfterBlocks<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">getOptions<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">Options<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;<\/i><i class=\"hd\">Options<\/i><i class=\"hk\">(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">strict<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">patterns<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">trimBeforeBlocks<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">trimAfterBlocks<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">parse<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$input<\/i><i class=\"hk\">,&nbsp;array&nbsp;<\/i><i class=\"hd\">$arguments&nbsp;<\/i><i class=\"hk\">=&nbsp;[]):&nbsp;<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">Parser<\/i><i class=\"hk\">::<\/i><i class=\"hd\">parseString<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$input<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$arguments<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">strict<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">patterns<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br><\/i>\n<\/i>\n<\/code>"},"F2":{"name":"Token.php","file":"\/Users\/matejbystricky\/Documents\/Work\/Matronator Brand\/projects\/gh.nosync\/parsem\/src\/Parsem\/Token.php","lines":[],"coverage":0,"total":0,"class":"light","digits":3,"lineCount":45,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php<br><br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);<br><br>namespace&nbsp;<\/i><i class=\"hd\">Matronator\\Parsem<\/i><i class=\"hk\">;<br><br>class&nbsp;<\/i><i class=\"hd\">Token<br><\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;<\/i><i class=\"hd\">string&nbsp;$match<\/i><i class=\"hk\">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;<\/i><i class=\"hd\">string&nbsp;$variable<\/i><i class=\"hk\">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;?<\/i><i class=\"hd\">string&nbsp;$filter&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">__construct<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$match<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">string&nbsp;$variable<\/i><i class=\"hk\">,&nbsp;?<\/i><i class=\"hd\">string&nbsp;$filter&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">match&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$match<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">variable&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$variable<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">filter&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$filter<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">fromArray<\/i><i class=\"hk\">(array&nbsp;<\/i><i class=\"hd\">$array<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">Token<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;<\/i><i class=\"hd\">self<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$array<\/i><i class=\"hk\">[<\/i><i class=\"hd\">0<\/i><i class=\"hk\">],&nbsp;<\/i><i class=\"hd\">$array<\/i><i class=\"hk\">[<\/i><i class=\"hd\">1<\/i><i class=\"hk\">],&nbsp;isset(<\/i><i class=\"hd\">$array<\/i><i class=\"hk\">[<\/i><i class=\"hd\">2<\/i><i class=\"hk\">])&nbsp;?&nbsp;<\/i><i class=\"hd\">$array<\/i><i class=\"hk\">[<\/i><i class=\"hd\">2<\/i><i class=\"hk\">]&nbsp;:&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Returns&nbsp;an&nbsp;array&nbsp;of&nbsp;tokens&nbsp;made&nbsp;from&nbsp;multi-dimensional&nbsp;array,&nbsp;like&nbsp;the&nbsp;one&nbsp;returned&nbsp;by&nbsp;`preg_match_all`.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;...$arrays<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;Token[]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">fromMultiArray<\/i><i class=\"hk\">(array&nbsp;...<\/i><i class=\"hd\">$arrays<\/i><i class=\"hk\">):&nbsp;array<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$return&nbsp;<\/i><i class=\"hk\">=&nbsp;[];<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(<\/i><i class=\"hd\">$arrays&nbsp;<\/i><i class=\"hk\">as&nbsp;<\/i><i class=\"hd\">$array<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!<\/i><i class=\"hd\">is_array<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$array<\/i><i class=\"hk\">))&nbsp;continue;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$return<\/i><i class=\"hk\">[]&nbsp;=&nbsp;<\/i><i class=\"hd\">self<\/i><i class=\"hk\">::<\/i><i class=\"hd\">fromArray<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$array<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$return<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<\/i>\n<\/i>\n<\/code>"},"F3":{"name":"Parser.php","file":"\/Users\/matejbystricky\/Documents\/Work\/Matronator Brand\/projects\/gh.nosync\/parsem\/src\/Parsem\/Parser.php","lines":{"67":-1,"68":-1,"70":-1,"71":-1,"85":1,"87":1,"88":1,"90":1,"91":1,"92":1,"93":1,"94":1,"96":1,"97":1,"98":1,"100":-1,"101":-1,"104":-1,"109":1,"110":1,"111":1,"112":-1,"113":1,"114":-1,"118":1,"131":1,"133":1,"134":1,"136":1,"137":1,"138":1,"140":1,"141":1,"142":1,"144":1,"145":1,"146":1,"148":1,"149":1,"150":1,"152":1,"153":1,"154":1,"155":1,"156":1,"157":1,"159":1,"160":1,"161":1,"162":1,"163":1,"166":1,"169":1,"170":-1,"173":1,"175":1,"176":1,"177":1,"178":1,"179":1,"181":1,"182":1,"185":1,"188":1,"193":1,"206":-1,"207":-1,"209":-1,"210":-1,"222":-1,"223":-1,"225":-1,"227":-1,"228":-1,"230":-1,"231":-1,"232":-1,"234":-1,"237":-1,"238":-1,"239":-1,"242":-1,"245":-1,"240":-1,"241":-1,"243":-1,"244":-1,"246":-1,"247":-1,"249":-1,"252":-1,"264":-1,"265":-1,"267":-1,"268":-1,"269":-1,"270":-1,"273":-1,"276":-1,"278":-1,"279":-1,"281":-1,"282":-1,"283":-1,"287":-1,"298":-1,"299":-1,"302":-1,"303":-1,"306":-1,"307":-1,"308":-1,"319":-1,"321":-1,"322":-1,"323":-1,"324":-1,"325":-1,"326":-1,"332":-1,"333":-1,"345":-1,"347":-1,"348":-1,"349":-1,"352":-1,"357":-1,"359":-1,"360":-1,"361":-1,"362":-1,"363":-1,"364":-1,"369":-1,"374":-1,"376":-1,"387":1,"389":1,"390":1,"391":1,"392":1,"393":1,"394":1,"395":1,"396":1,"408":1,"409":1,"411":1,"414":1,"415":1,"417":1,"418":1,"420":-1,"426":1,"437":-1,"438":-1,"439":-1,"440":-1,"444":-1,"455":1,"456":1,"457":1,"458":1,"460":1,"461":1,"462":1,"465":1,"466":1,"467":1,"469":1,"472":1,"483":1,"484":1,"485":-1,"486":-1,"489":1,"490":1,"491":1,"492":-1,"495":1,"497":1,"500":1,"510":1,"511":1,"512":1,"513":1,"514":1,"515":1,"516":1,"517":1,"518":1,"519":-1,"520":1,"521":1,"524":1,"537":1,"539":1,"541":1,"543":1,"545":1,"547":1,"549":1,"551":-1,"536":-1,"538":-1,"540":1,"542":-1,"544":-1,"546":-1,"548":-1,"550":1,"552":-1,"554":-1,"556":-1,"566":1,"568":1,"569":-1,"572":1,"577":-1,"578":-1,"579":-1,"580":-1,"583":-1,"586":1,"83":1,"191":1,"129":1,"385":1,"453":1,"481":1,"508":1,"534":1,"564":1,"397":1,"398":1,"400":1,"403":1,"407":1},"coverage":55,"total":238,"class":null,"digits":4,"lineCount":586,"content":"<code style='margin-left: 4em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php<br><br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);<br><br>namespace&nbsp;<\/i><i class=\"hd\">Matronator\\Parsem<\/i><i class=\"hk\">;<br><br>use&nbsp;<\/i><i class=\"hd\">Exception<\/i><i class=\"hk\">;<br>use&nbsp;<\/i><i class=\"hd\">InvalidArgumentException<\/i><i class=\"hk\">;<br>use&nbsp;<\/i><i class=\"hd\">Matronator\\Parsem\\Config\\PatternsOption<\/i><i class=\"hk\">;<br>use&nbsp;<\/i><i class=\"hd\">Nette\\Neon\\Neon<\/i><i class=\"hk\">;<br>use&nbsp;<\/i><i class=\"hd\">Opis\\JsonSchema\\Validator<\/i><i class=\"hk\">;<br>use&nbsp;<\/i><i class=\"hd\">RuntimeException<\/i><i class=\"hk\">;<br>use&nbsp;<\/i><i class=\"hd\">SplFileObject<\/i><i class=\"hk\">;<br>use&nbsp;<\/i><i class=\"hd\">Symfony\\Component\\Yaml\\Yaml<\/i><i class=\"hk\">;<br><br><\/i><i class=\"hc\">\/**<br>&nbsp;*&nbsp;Class&nbsp;Parser<br>&nbsp;*&nbsp;@package&nbsp;Matronator\\Parsem<br>&nbsp;*&nbsp;@author&nbsp;Matronator&nbsp;&lt;info@matronator.cz&gt;<br>&nbsp;*\/<br><\/i><i class=\"hk\">final&nbsp;class&nbsp;<\/i><i class=\"hd\">Parser<br><\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Matches:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;0:&nbsp;&lt;%&nbsp;var='default'|filter:10,'arg','another'&nbsp;%&gt;&nbsp;--&gt;&nbsp;(full&nbsp;match)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;1:&nbsp;var&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;&nbsp;(only&nbsp;variable&nbsp;name)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;2:&nbsp;='default'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;&nbsp;(default&nbsp;value)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;3:&nbsp;|filter:10,'arg','another'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;&nbsp;(filter&nbsp;with&nbsp;args)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;4:&nbsp;filter&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;&nbsp;(only&nbsp;filter&nbsp;name)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;const&nbsp;<\/i><i class=\"hd\">VARIABLE_PATTERN&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hs\">'\/&lt;%\\s?((?!endif|else)[a-zA-Z0-9_]+)(=.*?)?(\\|([a-zA-Z0-9_]+?)(?:\\:(?:(?:\\\\?\\'|\\\\?\")?.?(?:\\\\?\\'|\\\\?\")?,?)+?)*?)?\\s?%&gt;\/m'<\/i><i class=\"hk\">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Matches:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;0:&nbsp;&lt;%&nbsp;if&nbsp;a&nbsp;&gt;&nbsp;10&nbsp;%&gt;&nbsp;--&gt;&nbsp;(full&nbsp;match)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;1:&nbsp;a&nbsp;&gt;&nbsp;10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;&nbsp;(only&nbsp;condition)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;2:&nbsp;!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;&nbsp;(negation)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;3:&nbsp;a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;&nbsp;(left&nbsp;side)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;4:&nbsp;&gt;&nbsp;10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;&nbsp;(right&nbsp;side&nbsp;with&nbsp;operator)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;5:&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;&nbsp;(operator)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;6:&nbsp;10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;&nbsp;(right&nbsp;side)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;const&nbsp;<\/i><i class=\"hd\">CONDITION_PATTERN&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hs\">'\/(?&lt;all&gt;&lt;%\\s?if\\s(?&lt;condition&gt;(?&lt;negation&gt;!?)(?&lt;left&gt;\\S+?)\\s?(?&lt;right&gt;(?&lt;operator&gt;(?:&lt;=|&lt;|===|==|&gt;=|&gt;|!==|!=))\\s?(?&lt;value&gt;.+?))?)\\s?%&gt;\\n?)\/m'<\/i><i class=\"hk\">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Matches:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;0:&nbsp;&lt;#&nbsp;comment&nbsp;#&gt;&nbsp;--&gt;&nbsp;(full&nbsp;match)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;1:&nbsp;comment&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;&nbsp;(only&nbsp;comment)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;const&nbsp;<\/i><i class=\"hd\">COMMENT_PATTERN&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hs\">'\/&lt;#\\s?(.*?)\\s?#&gt;\/ms'<\/i><i class=\"hk\">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**&nbsp;@internal&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">private&nbsp;const&nbsp;<\/i><i class=\"hd\">LITERALLY_NULL&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hs\">'\u26a0\ufe0e__:-\u2400LITERALLY_NULL\u2400-:__\u26a0\ufe0e'<\/i><i class=\"hk\">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Parses&nbsp;a&nbsp;file&nbsp;to&nbsp;a&nbsp;PHP&nbsp;object,&nbsp;replacing&nbsp;all&nbsp;template&nbsp;variables&nbsp;with&nbsp;the&nbsp;provided&nbsp;`$arguments`&nbsp;values.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@since&nbsp;3.2.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string&nbsp;The&nbsp;parsed&nbsp;string<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$filename&nbsp;File&nbsp;to&nbsp;parse<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$arguments&nbsp;Array&nbsp;of&nbsp;arguments&nbsp;to&nbsp;find&nbsp;and&nbsp;replace&nbsp;while&nbsp;parsing&nbsp;`['key'&nbsp;=&gt;&nbsp;'value']`<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;bool&nbsp;$strict&nbsp;[optional]&nbsp;If&nbsp;set&nbsp;to&nbsp;`true,&nbsp;the&nbsp;function&nbsp;will&nbsp;throw&nbsp;an&nbsp;exception&nbsp;if&nbsp;a&nbsp;variable&nbsp;is&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;`$arguments`&nbsp;array.&nbsp;If&nbsp;set&nbsp;to&nbsp;`false`&nbsp;null&nbsp;will&nbsp;be&nbsp;used.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$pattern&nbsp;[optional]&nbsp;You&nbsp;can&nbsp;provide&nbsp;custom&nbsp;regex&nbsp;with&nbsp;two&nbsp;matching&nbsp;groups&nbsp;(for&nbsp;the&nbsp;variable&nbsp;name&nbsp;and&nbsp;for&nbsp;the&nbsp;filter)&nbsp;to&nbsp;use&nbsp;custom&nbsp;template&nbsp;syntax&nbsp;instead&nbsp;of&nbsp;the&nbsp;default&nbsp;one&nbsp;`&lt;%&nbsp;name|filter&nbsp;%&gt;`<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;RuntimeException&nbsp;If&nbsp;the&nbsp;file&nbsp;does&nbsp;not&nbsp;exist<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">parse<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$filename<\/i><i class=\"hk\">,&nbsp;array&nbsp;<\/i><i class=\"hd\">$arguments&nbsp;<\/i><i class=\"hk\">=&nbsp;[],&nbsp;<\/i><i class=\"hd\">bool&nbsp;$strict&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">PatternsOption&nbsp;$patterns&nbsp;<\/i><i class=\"hk\">=&nbsp;new&nbsp;<\/i><i class=\"hd\">PatternsOption<\/i><i class=\"hk\">()):&nbsp;<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!<\/i><i class=\"hd\">file_exists<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$filename<\/i><i class=\"hk\">))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">RuntimeException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"File&nbsp;'<\/i><i class=\"hd\">$filename<\/i><i class=\"hs\">'&nbsp;does&nbsp;not&nbsp;exist.\"<\/i><i class=\"hk\">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$contents&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">file_get_contents<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$filename<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;static::<\/i><i class=\"hd\">parseString<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$contents<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$arguments<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$strict<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$patterns<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Parses&nbsp;a&nbsp;string,&nbsp;replacing&nbsp;all&nbsp;template&nbsp;variables&nbsp;with&nbsp;the&nbsp;corresponding&nbsp;values&nbsp;passed&nbsp;in&nbsp;`$arguments`.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed&nbsp;The&nbsp;parsed&nbsp;string&nbsp;or&nbsp;the&nbsp;original&nbsp;`$string`&nbsp;value&nbsp;if&nbsp;it's&nbsp;not&nbsp;string<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;mixed&nbsp;$string&nbsp;String&nbsp;to&nbsp;parse.&nbsp;If&nbsp;not&nbsp;provided&nbsp;with&nbsp;a&nbsp;string,&nbsp;the&nbsp;function&nbsp;will&nbsp;return&nbsp;this&nbsp;value<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$arguments&nbsp;Array&nbsp;of&nbsp;arguments&nbsp;to&nbsp;find&nbsp;and&nbsp;replace&nbsp;while&nbsp;parsing&nbsp;`['key'&nbsp;=&gt;&nbsp;'value']`<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;bool&nbsp;$strict&nbsp;[optional]&nbsp;If&nbsp;set&nbsp;to&nbsp;`true`,&nbsp;the&nbsp;function&nbsp;will&nbsp;throw&nbsp;an&nbsp;exception&nbsp;if&nbsp;a&nbsp;variable&nbsp;is&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;`$arguments`&nbsp;array.&nbsp;If&nbsp;set&nbsp;to&nbsp;`false`&nbsp;null&nbsp;will&nbsp;be&nbsp;used.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$patterns&nbsp;[optional]&nbsp;You&nbsp;can&nbsp;provide&nbsp;custom&nbsp;regex&nbsp;with&nbsp;two&nbsp;matching&nbsp;groups&nbsp;(for&nbsp;the&nbsp;variable&nbsp;name&nbsp;and&nbsp;for&nbsp;the&nbsp;filter)&nbsp;to&nbsp;use&nbsp;custom&nbsp;template&nbsp;syntax&nbsp;instead&nbsp;of&nbsp;the&nbsp;default&nbsp;one&nbsp;`&lt;%&nbsp;name|filter&nbsp;%&gt;`<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;RuntimeException&nbsp;If&nbsp;a&nbsp;variable&nbsp;is&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;`$arguments`&nbsp;array&nbsp;and&nbsp;`$strict`&nbsp;is&nbsp;set&nbsp;to&nbsp;`true`<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">parseString<\/i><i class=\"hk\">(<\/i><i class=\"hd\">mixed&nbsp;$string<\/i><i class=\"hk\">,&nbsp;array&nbsp;<\/i><i class=\"hd\">$arguments&nbsp;<\/i><i class=\"hk\">=&nbsp;[],&nbsp;<\/i><i class=\"hd\">bool&nbsp;$strict&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">PatternsOption&nbsp;$patterns&nbsp;<\/i><i class=\"hk\">=&nbsp;new&nbsp;<\/i><i class=\"hd\">PatternsOption<\/i><i class=\"hk\">()):&nbsp;<\/i><i class=\"hd\">mixed<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!<\/i><i class=\"hd\">is_string<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">))&nbsp;return&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$string&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">removeComments<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$patterns<\/i><i class=\"hk\">[<\/i><i class=\"hs\">'comments'<\/i><i class=\"hk\">]&nbsp;??&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$string&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">parseConditions<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$arguments<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">pattern<\/i><i class=\"hk\">:&nbsp;<\/i><i class=\"hd\">$patterns<\/i><i class=\"hk\">[<\/i><i class=\"hs\">'conditions'<\/i><i class=\"hk\">]&nbsp;??&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">preg_match_all<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$patterns<\/i><i class=\"hk\">[<\/i><i class=\"hs\">'variables'<\/i><i class=\"hk\">]&nbsp;??&nbsp;static::<\/i><i class=\"hd\">VARIABLE_PATTERN<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$args&nbsp;<\/i><i class=\"hk\">=&nbsp;[];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">1<\/i><i class=\"hk\">]&nbsp;as&nbsp;<\/i><i class=\"hd\">$key&nbsp;<\/i><i class=\"hk\">=&gt;&nbsp;<\/i><i class=\"hd\">$match<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(<\/i><i class=\"hd\">$arguments<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$match<\/i><i class=\"hk\">]))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$args<\/i><i class=\"hk\">[]&nbsp;=&nbsp;<\/i><i class=\"hd\">$arguments<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$match<\/i><i class=\"hk\">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$default&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">getDefaultValue<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">2<\/i><i class=\"hk\">][<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">$default&nbsp;<\/i><i class=\"hk\">!==&nbsp;static::<\/i><i class=\"hd\">LITERALLY_NULL<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$args<\/i><i class=\"hk\">[]&nbsp;=&nbsp;<\/i><i class=\"hd\">$default<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">$strict<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">RuntimeException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Variable&nbsp;'<\/i><i class=\"hd\">$match<\/i><i class=\"hs\">'&nbsp;not&nbsp;found&nbsp;in&nbsp;arguments.\"<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$args<\/i><i class=\"hk\">[]&nbsp;=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$args&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">applyFilters<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$args<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(<\/i><i class=\"hd\">$args&nbsp;<\/i><i class=\"hk\">as&nbsp;<\/i><i class=\"hd\">$key&nbsp;<\/i><i class=\"hk\">=&gt;&nbsp;<\/i><i class=\"hd\">$arg<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">is_array<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$arg<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$args<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">]&nbsp;=&nbsp;<\/i><i class=\"hd\">json_encode<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$arg<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">JSON_UNESCAPED_SLASHES&nbsp;<\/i><i class=\"hk\">|&nbsp;<\/i><i class=\"hd\">JSON_UNESCAPED_UNICODE<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(<\/i><i class=\"hd\">is_object<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$arg<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$args<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">]&nbsp;=&nbsp;<\/i><i class=\"hd\">json_encode<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$arg<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">JSON_FORCE_OBJECT&nbsp;<\/i><i class=\"hk\">|&nbsp;<\/i><i class=\"hd\">JSON_UNESCAPED_SLASHES&nbsp;<\/i><i class=\"hk\">|&nbsp;<\/i><i class=\"hd\">JSON_UNESCAPED_UNICODE<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">str_replace<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">0<\/i><i class=\"hk\">],&nbsp;<\/i><i class=\"hd\">$args<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Parses&nbsp;a&nbsp;string,&nbsp;replacing&nbsp;all&nbsp;conditional&nbsp;blocks&nbsp;(`&lt;%&nbsp;if&nbsp;...&nbsp;%&gt;...&lt;%&nbsp;else&nbsp;%&gt;...&lt;%&nbsp;endif&nbsp;%&gt;`)&nbsp;depending&nbsp;on&nbsp;the&nbsp;result&nbsp;of&nbsp;the&nbsp;condition.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string&nbsp;The&nbsp;parsed&nbsp;string<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$string&nbsp;String&nbsp;to&nbsp;parse<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$arguments&nbsp;Array&nbsp;of&nbsp;arguments&nbsp;from&nbsp;the&nbsp;template<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$offset&nbsp;[optional]&nbsp;Offset&nbsp;to&nbsp;start&nbsp;searching&nbsp;for&nbsp;the&nbsp;condition&nbsp;from<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string|null&nbsp;$pattern&nbsp;[optional]&nbsp;You&nbsp;can&nbsp;provide&nbsp;custom&nbsp;regex&nbsp;for&nbsp;the&nbsp;`&lt;%&nbsp;if&nbsp;%&gt;`&nbsp;tag&nbsp;syntax.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">parseConditions<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">,&nbsp;array&nbsp;<\/i><i class=\"hd\">$arguments&nbsp;<\/i><i class=\"hk\">=&nbsp;[],&nbsp;<\/i><i class=\"hd\">int&nbsp;$offset&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">0<\/i><i class=\"hk\">,&nbsp;?<\/i><i class=\"hd\">string&nbsp;$pattern&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$pattern&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$pattern&nbsp;<\/i><i class=\"hk\">??&nbsp;static::<\/i><i class=\"hd\">CONDITION_PATTERN<\/i><i class=\"hk\">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(<\/i><i class=\"hd\">preg_match<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$pattern<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">PREG_OFFSET_CAPTURE<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$offset<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$result&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">getConditionResult<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$arguments<\/i><i class=\"hk\">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$conditionStart&nbsp;<\/i><i class=\"hk\">=&nbsp;(int)<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">0<\/i><i class=\"hk\">][<\/i><i class=\"hd\">1<\/i><i class=\"hk\">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$conditionLength&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">strlen<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">0<\/i><i class=\"hk\">][<\/i><i class=\"hd\">0<\/i><i class=\"hk\">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$insideBlockStart&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$conditionStart&nbsp;<\/i><i class=\"hk\">+&nbsp;<\/i><i class=\"hd\">$conditionLength<\/i><i class=\"hk\">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$hasElse&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">false<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$elseStart&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$conditionEnd&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$nestedOffset&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$insideBlockStart<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$nestedIfCount&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">0<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$elseMatch&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(<\/i><i class=\"hd\">preg_match<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'\/&lt;%\\s?(if|else|endif)\\s?.*?%&gt;\\n?\/m'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$tagMatches<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">PREG_OFFSET_CAPTURE<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$nestedOffset<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$tag&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$tagMatches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">1<\/i><i class=\"hk\">][<\/i><i class=\"hd\">0<\/i><i class=\"hk\">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$tagStart&nbsp;<\/i><i class=\"hk\">=&nbsp;(int)<\/i><i class=\"hd\">$tagMatches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">0<\/i><i class=\"hk\">][<\/i><i class=\"hd\">1<\/i><i class=\"hk\">];<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">$tag&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hs\">'if'<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$nestedIfCount<\/i><i class=\"hk\">++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(<\/i><i class=\"hd\">$tag&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hs\">'endif'<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">$nestedIfCount&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hd\">0<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$conditionEnd&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$tagStart<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$nestedIfCount<\/i><i class=\"hk\">--;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(<\/i><i class=\"hd\">$tag&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hs\">'else'&nbsp;<\/i><i class=\"hk\">&amp;&amp;&nbsp;<\/i><i class=\"hd\">$nestedIfCount&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hd\">0<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$hasElse&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$elseStart&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$tagStart<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$elseMatch&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$tagMatches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">0<\/i><i class=\"hk\">][<\/i><i class=\"hd\">0<\/i><i class=\"hk\">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$nestedOffset&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$tagStart&nbsp;<\/i><i class=\"hk\">+&nbsp;<\/i><i class=\"hd\">strlen<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$tagMatches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">0<\/i><i class=\"hk\">][<\/i><i class=\"hd\">0<\/i><i class=\"hk\">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">$conditionEnd&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">RuntimeException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Missing&nbsp;&lt;%&nbsp;endif&nbsp;%&gt;&nbsp;tag.\"<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$replaceLength&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$conditionEnd&nbsp;<\/i><i class=\"hk\">-&nbsp;<\/i><i class=\"hd\">$conditionStart&nbsp;<\/i><i class=\"hk\">+&nbsp;<\/i><i class=\"hd\">strlen<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$tagMatches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">0<\/i><i class=\"hk\">][<\/i><i class=\"hd\">0<\/i><i class=\"hk\">]);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">$hasElse<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$elseTagLength&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">strlen<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$elseMatch<\/i><i class=\"hk\">);&nbsp;<\/i><i class=\"hc\">\/\/&nbsp;Correctly&nbsp;calculate&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;`&lt;%&nbsp;else&nbsp;%&gt;`&nbsp;tag<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$insideBlock&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">substr<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$insideBlockStart<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$elseStart&nbsp;<\/i><i class=\"hk\">-&nbsp;<\/i><i class=\"hd\">$insideBlockStart<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$elseBlock&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">substr<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$elseStart&nbsp;<\/i><i class=\"hk\">+&nbsp;<\/i><i class=\"hd\">$elseTagLength<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$conditionEnd&nbsp;<\/i><i class=\"hk\">-&nbsp;(<\/i><i class=\"hd\">$elseStart&nbsp;<\/i><i class=\"hk\">+&nbsp;<\/i><i class=\"hd\">$elseTagLength<\/i><i class=\"hk\">));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$string&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">substr_replace<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$result&nbsp;<\/i><i class=\"hk\">?&nbsp;<\/i><i class=\"hd\">$insideBlock&nbsp;<\/i><i class=\"hk\">:&nbsp;<\/i><i class=\"hd\">$elseBlock<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$conditionStart<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$replaceLength<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$insideBlock&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">substr<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$insideBlockStart<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$conditionEnd&nbsp;<\/i><i class=\"hk\">-&nbsp;<\/i><i class=\"hd\">$insideBlockStart<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$string&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">substr_replace<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$result&nbsp;<\/i><i class=\"hk\">?&nbsp;<\/i><i class=\"hd\">$insideBlock&nbsp;<\/i><i class=\"hk\">:&nbsp;<\/i><i class=\"hs\">''<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$conditionStart<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$replaceLength<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$offset&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$conditionStart<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">removeComments<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">,&nbsp;?<\/i><i class=\"hd\">string&nbsp;$pattern&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">preg_replace<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$pattern&nbsp;<\/i><i class=\"hk\">??&nbsp;static::<\/i><i class=\"hd\">COMMENT_PATTERN<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">''<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Parses&nbsp;a&nbsp;file&nbsp;to&nbsp;a&nbsp;string,&nbsp;replacing&nbsp;all&nbsp;template&nbsp;variables&nbsp;with&nbsp;the&nbsp;provided&nbsp;`$arguments`&nbsp;values.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@deprecated&nbsp;3.2.0&nbsp;Use&nbsp;{@see&nbsp;Parser::parse()}&nbsp;instead<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string&nbsp;The&nbsp;parsed&nbsp;string<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$filename<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$arguments&nbsp;Array&nbsp;of&nbsp;arguments&nbsp;to&nbsp;find&nbsp;and&nbsp;replace&nbsp;while&nbsp;parsing&nbsp;`['key'&nbsp;=&gt;&nbsp;'value']`<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string|null&nbsp;$pattern&nbsp;[optional]&nbsp;You&nbsp;can&nbsp;provide&nbsp;custom&nbsp;regex&nbsp;with&nbsp;two&nbsp;matching&nbsp;groups&nbsp;(for&nbsp;the&nbsp;variable&nbsp;name&nbsp;and&nbsp;for&nbsp;the&nbsp;filter)&nbsp;to&nbsp;use&nbsp;custom&nbsp;template&nbsp;syntax&nbsp;instead&nbsp;of&nbsp;the&nbsp;default&nbsp;one&nbsp;`&lt;%&nbsp;name|filter&nbsp;%&gt;`<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">parseFileToString<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$filename<\/i><i class=\"hk\">,&nbsp;array&nbsp;<\/i><i class=\"hd\">$arguments&nbsp;<\/i><i class=\"hk\">=&nbsp;[],&nbsp;<\/i><i class=\"hd\">PatternsOption&nbsp;$patterns&nbsp;<\/i><i class=\"hk\">=&nbsp;new&nbsp;<\/i><i class=\"hd\">PatternsOption<\/i><i class=\"hk\">()):&nbsp;<\/i><i class=\"hd\">string<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!<\/i><i class=\"hd\">file_exists<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$filename<\/i><i class=\"hk\">))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">RuntimeException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"File&nbsp;'<\/i><i class=\"hd\">$filename<\/i><i class=\"hs\">'&nbsp;does&nbsp;not&nbsp;exist.\"<\/i><i class=\"hk\">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$contents&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">file_get_contents<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$filename<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;static::<\/i><i class=\"hd\">parseString<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$contents<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$arguments<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">false<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$patterns<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Converts&nbsp;a&nbsp;YAML,&nbsp;JSON&nbsp;or&nbsp;NEON&nbsp;file&nbsp;to&nbsp;a&nbsp;corresponding&nbsp;PHP&nbsp;object.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@deprecated&nbsp;3.2.0&nbsp;__Will&nbsp;be&nbsp;removed&nbsp;in&nbsp;the&nbsp;next&nbsp;version.__&nbsp;This&nbsp;was&nbsp;used&nbsp;for&nbsp;parsing&nbsp;JSON\/YAML\/NEON&nbsp;templates&nbsp;in&nbsp;v1&nbsp;and&nbsp;is&nbsp;no&nbsp;longer&nbsp;needed&nbsp;in&nbsp;v2&nbsp;and&nbsp;later.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;object<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$filename<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string|null&nbsp;$contents&nbsp;[optional]&nbsp;You&nbsp;can&nbsp;also&nbsp;provide&nbsp;the&nbsp;file's&nbsp;content&nbsp;as&nbsp;a&nbsp;string,&nbsp;but&nbsp;you&nbsp;still&nbsp;have&nbsp;to&nbsp;provide&nbsp;a&nbsp;`$filename`&nbsp;to&nbsp;know&nbsp;which&nbsp;format&nbsp;to&nbsp;parse&nbsp;(YAML,&nbsp;JSON&nbsp;or&nbsp;NEON).<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">decodeByExtension<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$filename<\/i><i class=\"hk\">,&nbsp;?<\/i><i class=\"hd\">string&nbsp;$contents&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">object<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">file_exists<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$filename<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$file&nbsp;<\/i><i class=\"hk\">=&nbsp;new&nbsp;<\/i><i class=\"hd\">SplFileObject<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$filename<\/i><i class=\"hk\">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$extension&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$file<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getExtension<\/i><i class=\"hk\">();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!<\/i><i class=\"hd\">$contents<\/i><i class=\"hk\">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">RuntimeException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"File&nbsp;'<\/i><i class=\"hd\">$filename<\/i><i class=\"hs\">'&nbsp;doesn't&nbsp;exist&nbsp;and&nbsp;no&nbsp;contents&nbsp;provided.\"<\/i><i class=\"hk\">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$matched&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">preg_match<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'\/^.+?\\.(json|yml|yaml|neon)$\/'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$filename<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!<\/i><i class=\"hd\">$matched<\/i><i class=\"hk\">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">RuntimeException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Couldn't&nbsp;get&nbsp;extension&nbsp;from&nbsp;filename&nbsp;'<\/i><i class=\"hd\">$filename<\/i><i class=\"hs\">'.\"<\/i><i class=\"hk\">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$extension&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">1<\/i><i class=\"hk\">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(<\/i><i class=\"hd\">$extension<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;<\/i><i class=\"hs\">'yml'<\/i><i class=\"hk\">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;<\/i><i class=\"hs\">'yaml'<\/i><i class=\"hk\">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$parsed&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$contents&nbsp;<\/i><i class=\"hk\">?&nbsp;<\/i><i class=\"hd\">Yaml<\/i><i class=\"hk\">::<\/i><i class=\"hd\">parse<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$contents<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">Yaml<\/i><i class=\"hk\">::<\/i><i class=\"hd\">PARSE_OBJECT_FOR_MAP<\/i><i class=\"hk\">)&nbsp;:&nbsp;<\/i><i class=\"hd\">Yaml<\/i><i class=\"hk\">::<\/i><i class=\"hd\">parseFile<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$filename<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">Yaml<\/i><i class=\"hk\">::<\/i><i class=\"hd\">PARSE_OBJECT_FOR_MAP<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;<\/i><i class=\"hs\">'neon'<\/i><i class=\"hk\">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$parsed&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$contents&nbsp;<\/i><i class=\"hk\">?&nbsp;<\/i><i class=\"hd\">Neon<\/i><i class=\"hk\">::<\/i><i class=\"hd\">decode<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$contents<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">)&nbsp;:&nbsp;<\/i><i class=\"hd\">Neon<\/i><i class=\"hk\">::<\/i><i class=\"hd\">decodeFile<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$filename<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;<\/i><i class=\"hs\">'json'<\/i><i class=\"hk\">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$parsed&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$contents&nbsp;<\/i><i class=\"hk\">?&nbsp;<\/i><i class=\"hd\">json_decode<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$contents<\/i><i class=\"hk\">)&nbsp;:&nbsp;<\/i><i class=\"hd\">json_decode<\/i><i class=\"hk\">(<\/i><i class=\"hd\">file_get_contents<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$filename<\/i><i class=\"hk\">));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">InvalidArgumentException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Unsupported&nbsp;extension&nbsp;value&nbsp;'<\/i><i class=\"hk\">{<\/i><i class=\"hd\">$extension<\/i><i class=\"hk\">}<\/i><i class=\"hs\">'.\"<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$parsed<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Validate&nbsp;the&nbsp;file&nbsp;against&nbsp;a&nbsp;template&nbsp;schema&nbsp;and&nbsp;return&nbsp;the&nbsp;result<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;boolean&nbsp;True&nbsp;if&nbsp;the&nbsp;file&nbsp;is&nbsp;a&nbsp;valid&nbsp;template,&nbsp;false&nbsp;otherwise.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$filename<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string|null&nbsp;$contents&nbsp;[optional]&nbsp;You&nbsp;can&nbsp;also&nbsp;provide&nbsp;the&nbsp;file's&nbsp;content&nbsp;as&nbsp;a&nbsp;string,&nbsp;but&nbsp;you&nbsp;still&nbsp;have&nbsp;to&nbsp;provide&nbsp;a&nbsp;`$filename`&nbsp;to&nbsp;know&nbsp;which&nbsp;format&nbsp;to&nbsp;parse&nbsp;(YAML,&nbsp;JSON&nbsp;or&nbsp;NEON).<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@deprecated&nbsp;3.2.0&nbsp;__Will&nbsp;be&nbsp;removed&nbsp;in&nbsp;the&nbsp;next&nbsp;version.__&nbsp;This&nbsp;was&nbsp;used&nbsp;for&nbsp;checking&nbsp;JSON\/YAML\/NEON&nbsp;templates&nbsp;in&nbsp;v1&nbsp;and&nbsp;is&nbsp;no&nbsp;longer&nbsp;needed&nbsp;in&nbsp;v2&nbsp;and&nbsp;later.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">isValid<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$filename<\/i><i class=\"hk\">,&nbsp;?<\/i><i class=\"hd\">string&nbsp;$contents&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">bool<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$extension&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">pathinfo<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$filename<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">PATHINFO_EXTENSION<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!<\/i><i class=\"hd\">in_array<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$extension<\/i><i class=\"hk\">,&nbsp;[<\/i><i class=\"hs\">'yml'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'yaml'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'json'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'neon'<\/i><i class=\"hk\">]))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$arguments&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">getArgumentsWithDefaults<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$contents&nbsp;<\/i><i class=\"hk\">??&nbsp;<\/i><i class=\"hd\">file_get_contents<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$filename<\/i><i class=\"hk\">));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$parsed&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">parseString<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$contents&nbsp;<\/i><i class=\"hk\">??&nbsp;<\/i><i class=\"hd\">file_get_contents<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$filename<\/i><i class=\"hk\">),&nbsp;<\/i><i class=\"hd\">$arguments<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(<\/i><i class=\"hd\">Exception&nbsp;$e<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">false<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$validator&nbsp;<\/i><i class=\"hk\">=&nbsp;new&nbsp;<\/i><i class=\"hd\">Validator<\/i><i class=\"hk\">();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$schema&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">file_get_contents<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'https:\/\/mtrgen.matronator.cz\/storage\/schemas\/template\/latest\/mtrgen-template-schema.json'<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(<\/i><i class=\"hd\">Exception&nbsp;$e<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$schema&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">file_get_contents<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'https:\/\/files.matronator.cz\/public\/mtrgen\/latest\/mtrgen-template-schema.json'<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(<\/i><i class=\"hd\">Exception&nbsp;$e<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">RuntimeException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Failed&nbsp;to&nbsp;get&nbsp;template&nbsp;schema&nbsp;from&nbsp;remote&nbsp;server:&nbsp;\"&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">$e<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getMessage<\/i><i class=\"hk\">());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$validator<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">validate<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$contents&nbsp;<\/i><i class=\"hk\">??&nbsp;<\/i><i class=\"hd\">file_get_contents<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$filename<\/i><i class=\"hk\">),&nbsp;<\/i><i class=\"hd\">$schema<\/i><i class=\"hk\">)-&gt;<\/i><i class=\"hd\">isValid<\/i><i class=\"hk\">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Validate&nbsp;the&nbsp;file&nbsp;against&nbsp;a&nbsp;template&nbsp;bundle&nbsp;schema&nbsp;and&nbsp;return&nbsp;the&nbsp;result<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;boolean&nbsp;True&nbsp;if&nbsp;the&nbsp;file&nbsp;is&nbsp;a&nbsp;valid&nbsp;bundle,&nbsp;false&nbsp;otherwise.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$filename<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string|null&nbsp;$contents&nbsp;[optional]&nbsp;You&nbsp;can&nbsp;also&nbsp;provide&nbsp;the&nbsp;file's&nbsp;content&nbsp;as&nbsp;a&nbsp;string,&nbsp;but&nbsp;you&nbsp;still&nbsp;have&nbsp;to&nbsp;provide&nbsp;a&nbsp;`$filename`&nbsp;to&nbsp;know&nbsp;which&nbsp;format&nbsp;to&nbsp;parse&nbsp;(YAML,&nbsp;JSON&nbsp;or&nbsp;NEON).<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">isValidBundle<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$filename<\/i><i class=\"hk\">,&nbsp;?<\/i><i class=\"hd\">string&nbsp;$contents&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">bool<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!<\/i><i class=\"hd\">preg_match<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'\/^.+?(\\.bundle)\\..+?$\/'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$filename<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">false<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!<\/i><i class=\"hd\">$contents&nbsp;<\/i><i class=\"hk\">&amp;&amp;&nbsp;!<\/i><i class=\"hd\">file_exists<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$filename<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">RuntimeException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"File&nbsp;'<\/i><i class=\"hd\">$filename<\/i><i class=\"hs\">'&nbsp;does&nbsp;not&nbsp;exist&nbsp;and&nbsp;no&nbsp;content&nbsp;provided.\"<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$validator&nbsp;<\/i><i class=\"hk\">=&nbsp;new&nbsp;<\/i><i class=\"hd\">Validator<\/i><i class=\"hk\">();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$schema&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">file_get_contents<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'https:\/\/www.mtrgen.com\/storage\/schemas\/bundle\/latest\/mtrgen-bundle-schema.json'<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$validator<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">validate<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$contents&nbsp;<\/i><i class=\"hk\">??&nbsp;<\/i><i class=\"hd\">file_get_contents<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$filename<\/i><i class=\"hk\">),&nbsp;<\/i><i class=\"hd\">$schema<\/i><i class=\"hk\">)-&gt;<\/i><i class=\"hd\">isValid<\/i><i class=\"hk\">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Find&nbsp;all&nbsp;(unique)&nbsp;variables&nbsp;in&nbsp;the&nbsp;`$string`&nbsp;template&nbsp;and&nbsp;return&nbsp;them&nbsp;as&nbsp;array&nbsp;with&nbsp;optional&nbsp;default&nbsp;values.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;object{arguments:&nbsp;array,&nbsp;defaults:&nbsp;array}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$string&nbsp;String&nbsp;to&nbsp;parse.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string|null&nbsp;$pattern&nbsp;$pattern&nbsp;[optional]&nbsp;You&nbsp;can&nbsp;provide&nbsp;custom&nbsp;regex&nbsp;with&nbsp;two&nbsp;matching&nbsp;groups&nbsp;(for&nbsp;the&nbsp;variable&nbsp;name&nbsp;and&nbsp;for&nbsp;the&nbsp;filter)&nbsp;to&nbsp;use&nbsp;custom&nbsp;template&nbsp;syntax&nbsp;instead&nbsp;of&nbsp;the&nbsp;default&nbsp;one&nbsp;`&lt;%&nbsp;name|filter&nbsp;%&gt;`<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">getArguments<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">,&nbsp;?<\/i><i class=\"hd\">string&nbsp;$pattern&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">object<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">preg_match_all<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$pattern&nbsp;<\/i><i class=\"hk\">??&nbsp;static::<\/i><i class=\"hd\">VARIABLE_PATTERN<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$defaults&nbsp;<\/i><i class=\"hk\">=&nbsp;[];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">1<\/i><i class=\"hk\">]&nbsp;as&nbsp;<\/i><i class=\"hd\">$key&nbsp;<\/i><i class=\"hk\">=&gt;&nbsp;<\/i><i class=\"hd\">$match<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">2<\/i><i class=\"hk\">][<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">]&nbsp;!==&nbsp;<\/i><i class=\"hs\">''<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$default&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">getDefaultValue<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">2<\/i><i class=\"hk\">][<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">$default&nbsp;<\/i><i class=\"hk\">!==&nbsp;static::<\/i><i class=\"hd\">LITERALLY_NULL<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$defaults<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">]&nbsp;=&nbsp;<\/i><i class=\"hd\">$default<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(object)&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hs\">'arguments'&nbsp;<\/i><i class=\"hk\">=&gt;&nbsp;static::<\/i><i class=\"hd\">removeDuplicates<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">1<\/i><i class=\"hk\">]),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hs\">'defaults'&nbsp;<\/i><i class=\"hk\">=&gt;&nbsp;<\/i><i class=\"hd\">$defaults<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Find&nbsp;all&nbsp;(unique)&nbsp;variables&nbsp;in&nbsp;the&nbsp;`$string`&nbsp;template&nbsp;and&nbsp;return&nbsp;them&nbsp;as&nbsp;array&nbsp;with&nbsp;default&nbsp;values&nbsp;or&nbsp;null&nbsp;if&nbsp;no&nbsp;default&nbsp;is&nbsp;provided.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$string&nbsp;String&nbsp;to&nbsp;parse.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string|null&nbsp;$pattern&nbsp;$pattern&nbsp;[optional]&nbsp;You&nbsp;can&nbsp;provide&nbsp;custom&nbsp;regex&nbsp;with&nbsp;two&nbsp;matching&nbsp;groups&nbsp;(for&nbsp;the&nbsp;variable&nbsp;name&nbsp;and&nbsp;for&nbsp;the&nbsp;filter)&nbsp;to&nbsp;use&nbsp;custom&nbsp;template&nbsp;syntax&nbsp;instead&nbsp;of&nbsp;the&nbsp;default&nbsp;one&nbsp;`&lt;%&nbsp;name|filter&nbsp;%&gt;`<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">getArgumentsWithDefaults<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">,&nbsp;?<\/i><i class=\"hd\">string&nbsp;$pattern&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;array<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$arguments&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">getArguments<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$pattern<\/i><i class=\"hk\">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$args&nbsp;<\/i><i class=\"hk\">=&nbsp;[];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(<\/i><i class=\"hd\">$arguments<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">arguments&nbsp;<\/i><i class=\"hk\">as&nbsp;<\/i><i class=\"hd\">$key&nbsp;<\/i><i class=\"hk\">=&gt;&nbsp;<\/i><i class=\"hd\">$arg<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$args<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$arg<\/i><i class=\"hk\">]&nbsp;=&nbsp;<\/i><i class=\"hd\">$arguments<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">defaults<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">]&nbsp;??&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$args<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">getTemplateDefaults<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">,&nbsp;?<\/i><i class=\"hd\">string&nbsp;$pattern&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;array<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">preg_match_all<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$pattern&nbsp;<\/i><i class=\"hk\">??&nbsp;static::<\/i><i class=\"hd\">VARIABLE_PATTERN<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$defaults&nbsp;<\/i><i class=\"hk\">=&nbsp;[];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">1<\/i><i class=\"hk\">]&nbsp;as&nbsp;<\/i><i class=\"hd\">$key&nbsp;<\/i><i class=\"hk\">=&gt;&nbsp;<\/i><i class=\"hd\">$match<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">2<\/i><i class=\"hk\">][<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">]&nbsp;!==&nbsp;<\/i><i class=\"hs\">''<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$default&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">getDefaultValue<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">2<\/i><i class=\"hk\">][<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">$default&nbsp;<\/i><i class=\"hk\">!==&nbsp;static::<\/i><i class=\"hd\">LITERALLY_NULL<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$defaults<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">]&nbsp;=&nbsp;<\/i><i class=\"hd\">$default<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$defaults<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">getTemplateVariables<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">,&nbsp;?<\/i><i class=\"hd\">string&nbsp;$pattern&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;array<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">preg_match_all<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$pattern&nbsp;<\/i><i class=\"hk\">??&nbsp;static::<\/i><i class=\"hd\">VARIABLE_PATTERN<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;static::<\/i><i class=\"hd\">removeDuplicates<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">1<\/i><i class=\"hk\">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Apply&nbsp;filter&nbsp;functions&nbsp;from&nbsp;the&nbsp;template&nbsp;to&nbsp;the&nbsp;matching&nbsp;argument&nbsp;values.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array&nbsp;Modified&nbsp;`$arguments`&nbsp;array,&nbsp;with&nbsp;each&nbsp;matched&nbsp;filter&nbsp;function&nbsp;applied&nbsp;to&nbsp;the&nbsp;corresponding&nbsp;argument&nbsp;value.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$matches&nbsp;The&nbsp;matches&nbsp;array&nbsp;from&nbsp;a&nbsp;`preg_match_all`&nbsp;function<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$arguments&nbsp;Array&nbsp;with&nbsp;the&nbsp;arguments&nbsp;(variables)&nbsp;from&nbsp;the&nbsp;template<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">applyFilters<\/i><i class=\"hk\">(array&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">,&nbsp;array&nbsp;<\/i><i class=\"hd\">$arguments<\/i><i class=\"hk\">):&nbsp;array<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$modified&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$arguments<\/i><i class=\"hk\">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(<\/i><i class=\"hd\">$arguments&nbsp;<\/i><i class=\"hk\">as&nbsp;<\/i><i class=\"hd\">$key&nbsp;<\/i><i class=\"hk\">=&gt;&nbsp;<\/i><i class=\"hd\">$arg<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">4<\/i><i class=\"hk\">][<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">])&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$filter&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">4<\/i><i class=\"hk\">][<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">3<\/i><i class=\"hk\">][<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">]&nbsp;=&nbsp;<\/i><i class=\"hd\">ltrim<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">3<\/i><i class=\"hk\">][<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">],&nbsp;<\/i><i class=\"hs\">'|'<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">3<\/i><i class=\"hk\">][<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">]&nbsp;&amp;&amp;&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">3<\/i><i class=\"hk\">][<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">]&nbsp;!==&nbsp;<\/i><i class=\"hd\">$filter<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$filterWithArgs&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">explode<\/i><i class=\"hk\">(<\/i><i class=\"hs\">':'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">3<\/i><i class=\"hk\">][<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$args&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">explode<\/i><i class=\"hk\">(<\/i><i class=\"hs\">','<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$filterWithArgs<\/i><i class=\"hk\">[<\/i><i class=\"hd\">1<\/i><i class=\"hk\">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$args&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">array_map<\/i><i class=\"hk\">(function&nbsp;(<\/i><i class=\"hd\">$item<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">is_numeric<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$item<\/i><i class=\"hk\">)&nbsp;&amp;&amp;&nbsp;!<\/i><i class=\"hd\">preg_match<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'\/([\\'\"])\/'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$item<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">strpos<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$item<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'.'<\/i><i class=\"hk\">)&nbsp;===&nbsp;<\/i><i class=\"hd\">false&nbsp;<\/i><i class=\"hk\">?&nbsp;(int)&nbsp;<\/i><i class=\"hd\">$item&nbsp;<\/i><i class=\"hk\">:&nbsp;(float)&nbsp;<\/i><i class=\"hd\">$item<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">in_array<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$item<\/i><i class=\"hk\">,&nbsp;[<\/i><i class=\"hs\">'false'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'true'<\/i><i class=\"hk\">]))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(bool)&nbsp;<\/i><i class=\"hd\">$item<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">$item&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hs\">'null'<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(string)&nbsp;<\/i><i class=\"hd\">trim<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$item<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'\\'\"`'<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;<\/i><i class=\"hd\">$args<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">array_unshift<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$args<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$arg<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$args&nbsp;<\/i><i class=\"hk\">=&nbsp;[<\/i><i class=\"hd\">$arg<\/i><i class=\"hk\">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">method_exists<\/i><i class=\"hk\">(<\/i><i class=\"hd\">Filters<\/i><i class=\"hk\">::class,&nbsp;<\/i><i class=\"hd\">$filter<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$modified<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">]&nbsp;=&nbsp;<\/i><i class=\"hd\">Filters<\/i><i class=\"hk\">::<\/i><i class=\"hd\">$filter<\/i><i class=\"hk\">(...<\/i><i class=\"hd\">$args<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">function_exists<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$filter<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$modified<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">]&nbsp;=&nbsp;<\/i><i class=\"hd\">$filter<\/i><i class=\"hk\">(...<\/i><i class=\"hd\">$args<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">RuntimeException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Filter&nbsp;function&nbsp;'<\/i><i class=\"hd\">$filter<\/i><i class=\"hs\">'&nbsp;does&nbsp;not&nbsp;exist.\"<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$modified<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Check&nbsp;if&nbsp;the&nbsp;`$string`&nbsp;template&nbsp;needs&nbsp;any&nbsp;arguments&nbsp;to&nbsp;be&nbsp;parsed.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;boolean&nbsp;True&nbsp;if&nbsp;the&nbsp;template&nbsp;needs&nbsp;arguments,&nbsp;false&nbsp;otherwise.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$string&nbsp;String&nbsp;to&nbsp;parse.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string|null&nbsp;$pattern&nbsp;$pattern&nbsp;[optional]&nbsp;You&nbsp;can&nbsp;provide&nbsp;custom&nbsp;regex&nbsp;with&nbsp;two&nbsp;matching&nbsp;groups&nbsp;(for&nbsp;the&nbsp;variable&nbsp;name&nbsp;and&nbsp;for&nbsp;the&nbsp;filter)&nbsp;to&nbsp;use&nbsp;custom&nbsp;template&nbsp;syntax&nbsp;instead&nbsp;of&nbsp;the&nbsp;default&nbsp;one&nbsp;`&lt;%&nbsp;name|filter&nbsp;%&gt;`<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">needsArguments<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$string<\/i><i class=\"hk\">,&nbsp;?<\/i><i class=\"hd\">string&nbsp;$pattern&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">bool<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">preg_match_all<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$pattern&nbsp;<\/i><i class=\"hk\">??&nbsp;static::<\/i><i class=\"hd\">VARIABLE_PATTERN<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$string<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hd\">2<\/i><i class=\"hk\">]&nbsp;as&nbsp;<\/i><i class=\"hd\">$match<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">$match&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hs\">''<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">false<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Get&nbsp;the&nbsp;result&nbsp;of&nbsp;the&nbsp;condition.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$matches&nbsp;The&nbsp;matches&nbsp;array&nbsp;from&nbsp;a&nbsp;`preg_match`&nbsp;function<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$arguments&nbsp;Array&nbsp;with&nbsp;the&nbsp;arguments&nbsp;(variables)&nbsp;from&nbsp;the&nbsp;template<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;bool&nbsp;The&nbsp;result&nbsp;of&nbsp;the&nbsp;condition<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">protected&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">getConditionResult<\/i><i class=\"hk\">(array&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">,&nbsp;array&nbsp;<\/i><i class=\"hd\">$arguments&nbsp;<\/i><i class=\"hk\">=&nbsp;[]):&nbsp;<\/i><i class=\"hd\">bool<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$left&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hs\">'left'<\/i><i class=\"hk\">][<\/i><i class=\"hd\">0<\/i><i class=\"hk\">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$negation&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hs\">'negation'<\/i><i class=\"hk\">][<\/i><i class=\"hd\">0<\/i><i class=\"hk\">]&nbsp;??&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$operator&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hs\">'operator'<\/i><i class=\"hk\">][<\/i><i class=\"hd\">0<\/i><i class=\"hk\">]&nbsp;??&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$right&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$matches<\/i><i class=\"hk\">[<\/i><i class=\"hs\">'value'<\/i><i class=\"hk\">][<\/i><i class=\"hd\">0<\/i><i class=\"hk\">]&nbsp;??&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$left&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">transformConditionValue<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$left<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$arguments<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">$negation&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hs\">'!'<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$left&nbsp;<\/i><i class=\"hk\">=&nbsp;!<\/i><i class=\"hd\">$left<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(<\/i><i class=\"hd\">$right<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$right&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">transformConditionValue<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$right<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$arguments<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$result&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">getResultByOperator<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$left<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$operator<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$right<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$result&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$left<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$result<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Transform&nbsp;the&nbsp;value&nbsp;of&nbsp;a&nbsp;condition&nbsp;to&nbsp;the&nbsp;correct&nbsp;type.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$value&nbsp;The&nbsp;value&nbsp;to&nbsp;transform<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$arguments&nbsp;Array&nbsp;with&nbsp;the&nbsp;arguments&nbsp;(variables)&nbsp;from&nbsp;the&nbsp;template<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed&nbsp;The&nbsp;transformed&nbsp;value<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">protected&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">transformConditionValue<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$value<\/i><i class=\"hk\">,&nbsp;array&nbsp;<\/i><i class=\"hd\">$arguments&nbsp;<\/i><i class=\"hk\">=&nbsp;[]):&nbsp;<\/i><i class=\"hd\">mixed<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$valueNegated&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">false<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">str_starts_with<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'!'<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$valueNegated&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">substr<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">str_starts_with<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'$'<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">substr<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!<\/i><i class=\"hd\">array_key_exists<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$arguments<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">RuntimeException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Variable&nbsp;'<\/i><i class=\"hd\">$value<\/i><i class=\"hs\">'&nbsp;not&nbsp;found&nbsp;in&nbsp;arguments.\"<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$arguments<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">convertArgumentType<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$valueNegated&nbsp;<\/i><i class=\"hk\">?&nbsp;!<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">:&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Convert&nbsp;the&nbsp;argument&nbsp;value&nbsp;to&nbsp;the&nbsp;correct&nbsp;type.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$value&nbsp;The&nbsp;value&nbsp;to&nbsp;convert<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed&nbsp;The&nbsp;converted&nbsp;value<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">protected&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">convertArgumentType<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$value<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">mixed<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((<\/i><i class=\"hd\">str_starts_with<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'\"'<\/i><i class=\"hk\">)&nbsp;&amp;&amp;&nbsp;<\/i><i class=\"hd\">str_ends_with<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'\"'<\/i><i class=\"hk\">))&nbsp;||&nbsp;(<\/i><i class=\"hd\">str_starts_with<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">\"'\"<\/i><i class=\"hk\">)&nbsp;&amp;&amp;&nbsp;<\/i><i class=\"hd\">str_ends_with<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">\"'\"<\/i><i class=\"hk\">)))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">substr<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">1<\/i><i class=\"hk\">,&nbsp;-<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hs\">'true'<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hs\">'false'<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">false<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hs\">'null'<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(<\/i><i class=\"hd\">str_contains<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'.'<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">floatval<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(<\/i><i class=\"hd\">is_numeric<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">)&nbsp;&amp;&amp;&nbsp;!<\/i><i class=\"hd\">str_contains<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'.'<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">intval<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(string)<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Get&nbsp;the&nbsp;result&nbsp;of&nbsp;the&nbsp;comparison&nbsp;between&nbsp;the&nbsp;left&nbsp;and&nbsp;right&nbsp;values&nbsp;using&nbsp;the&nbsp;operator.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;mixed&nbsp;$left&nbsp;The&nbsp;left&nbsp;side&nbsp;of&nbsp;the&nbsp;comparison<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string|null&nbsp;$operator&nbsp;The&nbsp;operator&nbsp;to&nbsp;use&nbsp;for&nbsp;the&nbsp;comparison<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;mixed&nbsp;$right&nbsp;The&nbsp;right&nbsp;side&nbsp;of&nbsp;the&nbsp;comparison<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;bool&nbsp;The&nbsp;result&nbsp;of&nbsp;the&nbsp;comparison<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">protected&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">getResultByOperator<\/i><i class=\"hk\">(<\/i><i class=\"hd\">mixed&nbsp;$left<\/i><i class=\"hk\">,&nbsp;?<\/i><i class=\"hd\">string&nbsp;$operator<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">mixed&nbsp;$right<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">bool<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(<\/i><i class=\"hd\">$operator<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;<\/i><i class=\"hs\">'=='<\/i><i class=\"hk\">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$left&nbsp;<\/i><i class=\"hk\">==&nbsp;<\/i><i class=\"hd\">$right<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;<\/i><i class=\"hs\">'==='<\/i><i class=\"hk\">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$left&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hd\">$right<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;<\/i><i class=\"hs\">'!='<\/i><i class=\"hk\">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$left&nbsp;<\/i><i class=\"hk\">!=&nbsp;<\/i><i class=\"hd\">$right<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;<\/i><i class=\"hs\">'!=='<\/i><i class=\"hk\">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$left&nbsp;<\/i><i class=\"hk\">!==&nbsp;<\/i><i class=\"hd\">$right<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;<\/i><i class=\"hs\">'&lt;'<\/i><i class=\"hk\">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$left&nbsp;<\/i><i class=\"hk\">&lt;&nbsp;<\/i><i class=\"hd\">$right<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;<\/i><i class=\"hs\">'&lt;='<\/i><i class=\"hk\">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$left&nbsp;<\/i><i class=\"hk\">&lt;=&nbsp;<\/i><i class=\"hd\">$right<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;<\/i><i class=\"hs\">'&gt;'<\/i><i class=\"hk\">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$left&nbsp;<\/i><i class=\"hk\">&gt;&nbsp;<\/i><i class=\"hd\">$right<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;<\/i><i class=\"hs\">'&gt;='<\/i><i class=\"hk\">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$left&nbsp;<\/i><i class=\"hk\">&gt;=&nbsp;<\/i><i class=\"hd\">$right<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$left<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">RuntimeException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Unsupported&nbsp;operator&nbsp;'<\/i><i class=\"hd\">$operator<\/i><i class=\"hs\">'.\"<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$defaultMatch&nbsp;The&nbsp;default&nbsp;value&nbsp;match<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed&nbsp;The&nbsp;default&nbsp;value<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">protected&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">getDefaultValue<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$defaultMatch<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">mixed<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$default&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">ltrim<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$defaultMatch<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'='<\/i><i class=\"hk\">)&nbsp;??&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<\/i><i class=\"hd\">$default&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;static::<\/i><i class=\"hd\">LITERALLY_NULL<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;static::<\/i><i class=\"hd\">convertArgumentType<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$default<\/i><i class=\"hk\">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">removeDuplicates<\/i><i class=\"hk\">(array&nbsp;<\/i><i class=\"hd\">$array<\/i><i class=\"hk\">):&nbsp;array<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$uniqueValues&nbsp;<\/i><i class=\"hk\">=&nbsp;[];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(<\/i><i class=\"hd\">$array&nbsp;<\/i><i class=\"hk\">as&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!<\/i><i class=\"hd\">in_array<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$uniqueValues<\/i><i class=\"hk\">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$uniqueValues<\/i><i class=\"hk\">[]&nbsp;=&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$uniqueValues<\/i><i class=\"hk\">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br><\/i>\n<\/i>\n<\/code>"},"F4":{"name":"Config\/PatternsOption.php","file":"\/Users\/matejbystricky\/Documents\/Work\/Matronator Brand\/projects\/gh.nosync\/parsem\/src\/Parsem\/Config\/PatternsOption.php","lines":{"11":1,"17":1,"15":1},"coverage":100,"total":3,"class":"light","digits":3,"lineCount":17,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php<br><br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);<br><br>namespace&nbsp;<\/i><i class=\"hd\">Matronator\\Parsem\\Config<\/i><i class=\"hk\">;<br><br>use&nbsp;<\/i><i class=\"hd\">ArrayObject<\/i><i class=\"hk\">;<br><br>class&nbsp;<\/i><i class=\"hd\">PatternsOption&nbsp;<\/i><i class=\"hk\">extends&nbsp;<\/i><i class=\"hd\">ArrayObject<br><\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">__construct<\/i><i class=\"hk\">(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;?<\/i><i class=\"hd\">string&nbsp;$variables&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;?<\/i><i class=\"hd\">string&nbsp;$conditions&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;?<\/i><i class=\"hd\">string&nbsp;$comments&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;{&nbsp;}<br>}<br><\/i>\n<\/i>\n<\/code>"},"F5":{"name":"Config\/Options.php","file":"\/Users\/matejbystricky\/Documents\/Work\/Matronator Brand\/projects\/gh.nosync\/parsem\/src\/Parsem\/Config\/Options.php","lines":[],"coverage":0,"total":0,"class":"light","digits":3,"lineCount":18,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php<br><br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);<br><br>namespace&nbsp;<\/i><i class=\"hd\">Matronator\\Parsem\\Config<\/i><i class=\"hk\">;<br><br>use&nbsp;<\/i><i class=\"hd\">ArrayObject<\/i><i class=\"hk\">;<br><br>class&nbsp;<\/i><i class=\"hd\">Options&nbsp;<\/i><i class=\"hk\">extends&nbsp;<\/i><i class=\"hd\">ArrayObject<br><\/i><i class=\"hk\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">__construct<\/i><i class=\"hk\">(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;readonly&nbsp;<\/i><i class=\"hd\">bool&nbsp;$strict&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">false<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;readonly&nbsp;<\/i><i class=\"hd\">PatternsOption&nbsp;$patterns&nbsp;<\/i><i class=\"hk\">=&nbsp;new&nbsp;<\/i><i class=\"hd\">PatternsOption<\/i><i class=\"hk\">(),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;readonly&nbsp;?<\/i><i class=\"hd\">bool&nbsp;$trimBeforeBlocks&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">false<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;readonly&nbsp;?<\/i><i class=\"hd\">bool&nbsp;$trimAfterBlocks&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">false<\/i><i class=\"hk\">,<br>&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;{&nbsp;}<br>}<br><\/i>\n<\/i>\n<\/code>"}};
		let _directories = {"files":{"Filters.php":"F0","Engine.php":"F1","Token.php":"F2","Parser.php":"F3","Config":{"name":"Config","count":2,"coverage":100,"files":{"PatternsOption.php":"F4","Options.php":"F5"}}}};
		let isFilesInitialized = false;
		let isDirectoriesInitialized = false;

		let sort = 'coverage';
		let desc = true;
		let classes = {
			'1': 't', // tested
			'-1': 'u', // untested
			'-2': 'dead', // dead code
		};

		function getSortedKeys() {
			switch (sort) {
				case 'coverage':
					let sortedFiles = [];
					for (let i in _files) {
						sortedFiles.push([i, _files[i].coverage]);
					}

					sortedFiles.sort(function(a, b) {
						return desc ? (b[1] - a[1]) : (a[1] - b[1]);
					});

					let filesByCoverage = [];
					for (let i = 0; i < sortedFiles.length; i++) {
						filesByCoverage.push(sortedFiles[i][0]);
					}
					return filesByCoverage;

				case 'path':
					return sortAlphabetically(_files, desc);

				default:
					return Object.keys(_files).sort((a, b) => desc ? (b-a) : (a-b));
			}
		}

		function sortAlphabetically(obj, isDesc) {
			let sorted = [];
			for (let i in obj) {
				sorted.push([i, obj[i].name]);
			}

			sorted.sort(function(a, b) {
				let compared = a[1].localeCompare(b[1]);
				return compared === -1 ? (isDesc ? 1 : -1) : (compared === 1 ? (isDesc ? -1 : 1) : 0);
			});

			let out = [];
			for (let i = 0; i < sorted.length; i++) {
				out.push(sorted[i][0]);
			}
			return out;
		}

		function initDirectories() {
			if (isDirectoriesInitialized) {
				return;
			}
			let el = document.getElementById('tree');
			el.innerHTML = createDirectory(_directories.files);
			isDirectoriesInitialized = true;
		}

		function createDirectory(directory) {
			let out = '';
			Object.keys(directory).sort(function(a, b) {
				let aIsFile = a.endsWith('.php');
				let bIsFile = b.endsWith('.php');
				if ((aIsFile || bIsFile) && !(aIsFile && bIsFile)) {
					return aIsFile ? 1 : -1;
				}
				let compared = a.localeCompare(b);
				return compared === -1 ? -1 : (compared === 1 ? 1 : 0);
			}).forEach(function(i) {
				let dir = directory[i];
				let id, coverage;
				let isFile = typeof dir === 'string';
				if (isFile) {
					id = dir;
					dir = _files[dir];
					coverage = dir.coverage;
				} else {
					id = null;
					coverage = dir.count === 0 ? 0 : Math.round(dir.coverage / dir.count);
				}

				let html = createFileInfo(isFile ? ('D' + id) : dir.name, {
					coverage: coverage,
					name: isFile ? i : (i + ' <small>(' + dir.count + ')</small>'),
					class: isFile ? dir.class : 'dir',
				}, isFile ? 'toggle' : 'toggle-dir');

				if (isFile) {
					html += '<div class="code" id="D' + id + '"></div>';
				} else {
					html += '<div class="directory" id="' + dir.name + '">' + createDirectory(dir.files) + '</div>';
				}

				out += '<div>' + html + '</div>';
			});
			return out;
		}

		function initFiles(force) {
			if (!force && isFilesInitialized) {
				return;
			}
			let filesEl = document.getElementById('files-content');
			filesEl.innerHTML = '';

			getSortedKeys().forEach(function(i) {
				let file = _files[i];
				let html = createFileInfo(i, file);

				html += '<div class="code" id="' + i + '"></div>';

				let wrapper = document.createElement('div');
				wrapper.innerHTML = html;
				filesEl.appendChild(wrapper);
			});
			isFilesInitialized = true;
		}

		function createFileInfo(id, file, toggleClass) {
			toggleClass = toggleClass || 'toggle';
			return '<table>' +
				'<tbody><tr' + (file.class ? (' class="' + file.class + '"') : '') + '>' +
				'<td class="number"><small>' + file.coverage + ' %</small></td>' +
				'<td><div class="bar"><div style="width: ' + file.coverage + '%"></div></div></td>' +
				'<td><a href="#' + id + '" class="' + toggleClass + '">' + file.name + '</a></td>' +
				'</tr>' +
				'</tbody></table>';
		}

		function initFileContent(el) {
			if (el.hasAttribute('data-initialized')) {
				return;
			}

			let id = el.getAttribute('id');
			id = id.startsWith('D') ? id.split('D')[1] : id;
			let file = _files[id];
			if (!file) {
				return;
			}

			let aside = '';
			let prevClass = null;
			let closeTag = '', buffer = '';
			for (let i = 1; i < file.lineCount; i++) {
				let currentClass = file.lines[i] && classes[file.lines[i]] ? classes[file.lines[i]] : '';
				if (currentClass !== prevClass) {
					aside += (buffer + closeTag);
					buffer = '';
					closeTag = '</div>';
					aside += '<div' + (currentClass ? (' class="' + currentClass + '"') : '') + '>';
				}

				let currentId = id + 'L' + i;
				buffer += '<a href="#' + currentId + '" id="' + currentId + '">' + '&nbsp;'.repeat(file.digits - String(i).length) + i + "</a>";
				prevClass = currentClass;
			}
			aside += buffer + closeTag;

			el.innerHTML = '<div><aside>' + aside + '</aside>' + (file ? file.content : 'ERROR: Not available') + '</div>';

			el.setAttribute('data-initialized', 'true');
		}

		function addClickListener(className, callback) {
			document.body.addEventListener('click', function (e) {
				let isParent = e.target.parentNode && e.target.parentNode.classList.contains(className);
				if (isParent || e.target.classList.contains(className)) {
					callback.apply(isParent ? e.target.parentNode : e.target, [e]);
				}
			});
		}

		addClickListener('sort', function(e) {
			e.preventDefault();
			sort = this.getAttribute('data-sort');

			let sortItems = document.getElementsByClassName('sort');
			for (let i = 0; i < sortItems.length; i++) {
				if (sortItems[i] === this) {
					continue;
				}
				sortItems[i].classList.remove('asc');
				sortItems[i].classList.remove('desc');
			}

			desc = false;
			if (this.classList.contains('asc')) {
				desc = true;
				this.classList.remove('asc');
				this.classList.add('desc');
			} else {
				this.classList.remove('desc');
				this.classList.add('asc');
			}

			initFiles(true);
		});

		addClickListener('toggle', function(e) {
			e.preventDefault();
			let el = document.getElementById(this.href.split('#')[1]);
			if (el.style.display === 'block') {
				el.style.display = 'none';
			} else {
				initFileContent(el);
				el.style.display = 'block';
			}
		});

		addClickListener('toggle-dir', function(e) {
			e.preventDefault();
			let el = document.getElementById(this.href.split('#')[1]);
			if (el.classList.contains('opened')) {
				this.classList.remove('opened');
				el.classList.remove('opened');
			} else {
				this.classList.add('opened');
				el.classList.add('opened');
			}
		});

		addClickListener('tab-item', function(e) {
			e.preventDefault();
			let tabs = document.getElementsByClassName('tab-content');
			for (let i = 0; i < tabs.length; i++) {
				tabs[i].style.display = 'none';
			}
			let tabItems = document.getElementsByClassName('tab-item');
			for (let i = 0; i < tabItems.length; i++) {
				tabItems[i].classList.remove('active');
			}
			this.classList.add('active');

			let id = this.href.split('#')[1];
			if (id === 'files') {
				initFiles();
			} else {
				initDirectories();
			}

			let el = document.getElementById(id);
			if (el.style.display === 'block') {
				el.style.display = 'none';
			} else {
				el.style.display = 'block';
			}
		});

		document.addEventListener("DOMContentLoaded", function(event) {
			initFiles(true);

			let el = document.getElementById(window.location.hash.replace(/^#|L\d+$/g, ''));
			if (el) {
				initFileContent(el);
				el.style.display = 'block';
			}
		});
	})();
</script>
</body>
</html>
